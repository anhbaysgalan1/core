!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(n.OKGAnalytics={})}(this,function(n){"use strict";var t=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},o=void 0,i=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return window.analytics.ready(function(){return window.analytics.page.apply(o,t)})},r=function(n){var t=n.referrer,e=n.delay;setTimeout(function(){var n={title:document.title,referrer:t,path:window.location.pathname,search:window.location.search,url:window.location.href};i(n.title,n)},e||0)},a=function(n){var o,i,a,c=n.integrations,s=n.options,d=void 0===s?{}:s,l=n.autorun,y=void 0===l||l;"object"!==(void 0===(a=c)?"undefined":e(a))||Object.keys(a).length?(window.analytics.initialize(c,d),!1!==y&&(i="object"===e(window.history.state)?window.history.state:null,window.history.replaceState(t({},i,{referrer:document.referrer}),""),r({referrer:document.referrer}),o=window.history.pushState,window.history.pushState=function(){var n=window.location.origin+window.location.pathname+window.location.search,e=[t({},arguments.length<=0?void 0:arguments[0],{referrer:n}),arguments.length<=1?void 0:arguments[1],arguments.length<=2?void 0:arguments[2]];try{r({referrer:n})}catch(n){console.error(n)}return o.apply(window.history,e)},window.addEventListener("popstate",function(){var n=(window.history.state||{}).referrer;r({referrer:(void 0===n?"":n)||"",delay:50})},!1))):console.error("analyticsStartup has failed! Your analytic integrations are missing!")},c=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return arguments[1].reduce(function(t,e){return"function"!=typeof n[e]?""+t+e+" ,":t},"")};n.trackEventWhenReady=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return window.analytics.ready(function(){return window.analytics.track.apply(o,t)})},n.trackPageWhenReady=i,n.identifyWhenReady=function(){for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];return window.analytics.ready(function(){return window.analytics.identify.apply(o,t)})},n.initAnalytics=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.analytics,o=n.integrations,i=n.options,r=void 0===i?{}:i,s=n.autorun,d=void 0===s||s;if("object"!==(void 0===t?"undefined":e(t))||"object"!==(void 0===o?"undefined":e(o)))throw new Error("Analytics is not logging! You must initialize analytics with the correct params.");var l=c(t,["ready","track","page","identify"]);if(l.length)throw new Error("Analytics is not logging! Expected analytics to contain "+l+" function(s).");var y,u,f=c(t.Integrations,Object.keys(o));f.length&&(console.warn("Your analytics is missing the integrations you specified in your settings@ Expected analytics to contain "+f+" integration(s)."),console.warn("The missing integration(s) will not work without being included in your analytics.js.")),window.analytics=t,y={integrations:o,options:r,autorun:d},u=window.onload,window.onload="function"==typeof u?function(){a(y);for(var n=arguments.length,t=Array(n),e=0;e<n;e++)t[e]=arguments[e];u.apply(this,t)}:function(){return a(y)}},Object.defineProperty(n,"__esModule",{value:!0})});
